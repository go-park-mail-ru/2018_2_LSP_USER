language: go
go:
- 1.11
before_script:
- sudo apt-get install -qq sshpass
script: 
after_success:
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST rm ~/server/user
- sshpass -p $SSH_PASS scp -rp -o stricthostkeychecking=no * $SSH_USER@$SSH_HOST:~/server/user
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  build -t user-server ~/server/user
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  stop user
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  run -e "DB_HOST=postgres" -e "DB_USER=$DB_USER" -e "DB_PASS=$DB_PASS" -e "DB_DB=$DB_DB"
  -d --link postgres:postgres --publish 6060:8080 --name user --rm user-server
env:
  global:
  - secure: TALlCOGXUjc+824U6UKQOpxNZfKXstgQMiHw5O55p/kFNJ8cwCHFwp7YT8QALh8KxC2OW/paYf6VPFJgsD/eojoQCFJ99MayYh56pllRPdBF78h0/aihSNo5zUj0Jwtkn+M/h2qvpGarcIyZ/4c5QTnXKjAwNai6kRDmW0Xq0K/X1ftf8pnsYbYiftehOXwqJR6eToQ6NZnXuMjpj4SlqaBQf9eQ7SCKelS75uXTJEWOUXUHnxRD6kz0ZjqorrUEQ/tLbd+E6dBd7Dlr/S6pE0fbnOa/0Dwo0+zFPwYDlQa0DOiJGaiAFsfSGqW28iWSFEcnA1xN1ejRgBEGzIT5I1Fv/7XBXGdlL1ckQMb++qRTq/mLWke8Sffb/WK88Cld5V6dB7fEpxBubkLcSGTAjOLkeR/6MDQqMYnWeMSt8GXT86tQGSotz40rCHBS4CwLQOoOgNwNBP2sNCyQisapy8D1HTMnECy4pmD/tDp2MCvjh62M/gDeMELu7ZM2Xl2hIFbjyVgvQOIUMnwszCjkOhiUg7pTVZa1r9mldMaWWnyWdb3E8tQhHXEWAPHbZ9l13mxUXbyulM4lke2WXEXD9r7jY+pfjJGSJToFMeVzoMKJwwhkn4a6b5li8yt+2GE8CmDF+sg70pIRNB3Vy3B7bhmDR5S7TWx7DiCMKPVCsx4=
  - secure: McxkzOVwWuB0Ri9CJhCNP5FdSUOXHZZ3LM+UVbjOfvqFjuMcDd9XtaqvbQyJoSOJlY4PYqpjgDg/QRK9b2HZ4b01QpWNG8m+6UKdmiBkLCj0CjhSivK4jnBsz9PzfK2DJFxG+zfPgd9cGlLGrOYAFj9HOnisddOpwrUN7XgA0Bu84snH/nTp2FbR/Cd9S56hj5FMw6PFj2NBXufg18/Tp/2XDui8NEQRRUrkTUdQynJbxO25PBf5kwxGxTNGvIo5fTpsTteBMikFzytD7q4LO/7UCOlzVOfUmdBQr6Mznq+49I0xlBxb4XKpyhrWlIPoAmN8+FZd9WK7DPtei0ycVvneGc7X/uqfpU9pA814wbexxu2pTHjppJ4f6qGUzLdB64vOJYsY+5SFLkeEtjoHIkj7wKeXz51a0nja4kTN/Az6ysy92vH7WPCXBkcz/PFqHUcHS94flLywe3ksHfp1qoypqaiJidBhNfgT5KWYReHaVY9W6zWmkn388wj+8AAvbV7DO4cgihF+pW/Z9XF49jciGM/nuJ1GjSVor/xgEMFlcuYC6mFQa9+wNN4I4JH3iKDTz5zcynoFbl7z0iVK18aoXPkkuKJGtvlZJFQD0N0ThfPvHlTaPhQ3FwQZum8rnEQ/MhGIYqAJvD1WzUCnY5lCB2+lwZWQ+hI6HbIRfqQ=
  - secure: XMKN0HEuLEfgHj/r+YJZtXn61YswQrF24KskluYDY8iOFZzMzWZgXES18imcfFQ/0DafcpMEND0JoJ/GXQWw1RB6cnPPirFi+W6l2o5clMZKl3b29tzPsrHo3lF2Ulmo8MP12kQIcBbASN6A+gDfkYSp0bnmtAIPkyICBq0FI3+O3aQTIPiohfcrQXmsL8kfCLRuMtAkRzOdRXVp8HD++lyyU0q4o5QU91zx4aChmq+O4CSZiHgA1L6A4RoZd6RlQWRAg7yKw9KmuingOJQc3dPYEmxyng9LRi5DN94+1NFeXlP2PR5iALPc7Nfs3YUA65dHM8aOgMZj9CSSopSNqrneCraYnHT7LH/cencBbL2pjVkidKyGYXy3LWSgX78yFoHdfo6SH3KW1J8Zt0hauGp7GSgENXUCXyMe0lSYcW65My+X7+XPUJuzHjJW7aiywqhhwLHuGFyTEQViKBFKs18D5fkvd69kl3o49TNZ4GV7S4lyY/OgEwxWXoG0kGwXnogZiQykty+O2hUaUsCeu0tfEmTpJLh/OdLe1skwzcMo1d6ev6qnGbHrTEnV50fEGvrx3yN1D11FnCxiQEdhFNIpV1OvC/LOld8FG1yFKQhptd8hC2yUiKKJou0x5qKv2W7mXzZSRbQX+EX/y8XkKp+daUSBOVjcp+TA6z341xk=
  - secure: fykDiytfe52HL4sjCcCB88Cu3A88cobB1q48MQ0kT0+9hZCfd9FP7I4pTSg2ooCoqH7mOUU9LBnLfUOP37JA2P+OTeJ63nLtZhdI29uB+ng2ESe6WWGaZbcfCjI6aEkjl2Hipt0CqjTNUObrax+MPFxDQxMA5D9ACuh5EhO66UZ7u7WX3iUJegt9hI4j+TK7ua+zzMwlJAdz2SobYLMa7yd6Pt3YuGGhoBoKls9DBxyJ6mOsQ2eSWFk7LfaE52GGOq3TVXmMg0jFDslDra67h4UwrOyKcGe5BRftPEnnsHC3iCn2JYd6o/zIjrEUJ7Conuy81lBJyhjyJ9U9bcpJcDiN7ChF/3J1mIqlHetvy7UQZbt8Ol4Exw+y9iHA2Ph4aL1c6oh1EyOfT6emwPZlhkxD2QOLEVXs1bd+F58E8SbudGxbqgM+IRvQlRNmYmGjFrpD1uvWk4NlRUhSuZmJ7F5AweS8Xc7U3GOTJ2JDjYvZToaQ3wTJir6BvSJNSAZY0y9FubGT2vO6YY7vAE/UMwnPPSb9MYLYFLgLo7AmtxnMExzX82IYqL6dnkS5hfc2AoAimTkVRz4LsHtme3VVpmuwCDIP8ptf9WQMOBHS2cMEUok6O5HkLO2nM/1vO+VG2VZ5C1hWfbJIrqkCB2cRmSVhZ5CtabkRCjNYYxBqHMU=
  - secure: AuutehynXojhoc9mgmF84+mJQjZhd6SUGBWugYtqYOTnhBocuVp9V0c1RIZknlJ/0yWcugJ5VjNieqYu3AEV2ufBjhwzYzufu/91KfOpVel7moQYAvKR+9I0DkiKR2nRCRkOVb0sPazvd+kMTQhbBLoIMKXS1hz7w2CJSLItnwbtV+MJDlTbF00REuV6sk297/trK21oLq6oywPNGYb/GpD1SOAb4K7L58Uj7E++LKuWtclPlChWsFbf6ZWwhzEG4MA09R0m3ZZsFCCwyYrAm8D8LlZRF7RYNZhNJ5g4EJ/jK3IJgQo5IAFhDi1b1S7HS5USXjEc0eI5yEZdFc32VitFBC6Vb6TvlwBFM8Z4iphMS9D/vwe/wY2yR7VNUeiFBSbVKfIeB5QPs/XSAoG0J9pC/1APnnztFrRTDcguyLuttyr8J5VrwSeBAejLygxkQjtJkL2AIM53xFtjd+0LorIXOES1bdjB0kWXcs0xJ+uV27dKsfUuQObBvCpusym6QJJY5cZBWDh2sJTIqtrVurvtBA7CyqpUK/rISdI0kPyjjVMVZFyKIQUIdmbRrCDbtUygRigMcS4OAmvpGlmpSc0ZQwScXnWOujTqsu8wEeQ7JmQchBCkLA/CKhgkF/0z09OMA61FTYfSrydA7k1fztKpxwRn8TTkdSEdZNaYL38=
  - secure: pbSBPp56C3VKU0KK/ta0Q/JBZchLA6KwAIXcovXf4qazgf52FqpE94OTfCdtcUJC23nTPdSSr3ZNQEOPzzzN/H3pOjkPbQGEM9rBfRfMyRL5u9sUwJAngNt9eIhOZL/W8jP95kzUHBVPFtrzS+MUgRmP0GGubZRfLntpM7ywpyg+EkWSN1PsV6Qp3fKbwoyhl5lW6PGLyItSRYRCTZxcpg9TTIFwdlETsni5SLbUHPaA6sAGPGLV0efpc1xJut3sLrC+PdrgOPumNCu65UzdbzuEYHph2Db80nxK0KVesY4MhRmh9guaymH4HHUsIDPVB6OUVotvN+RdWJbznQo95J6Kgw/OcKJtKcwi6uG8/wGFfgP5Sy83/J66S1/KaaN3pB3PnJDYweoPcKx408s3Jt+6GaxyxT8XotWOQDTgQtO4PsVcsDM1nksfK5Z58NKXoXcQcuzSl8wm3knG56EnI52JmfpL085GnbITzlVJe4LbB5mGEfjJB9dKe4mVTkdXgOFlr7WT+iLaEfh9zN+zkTcd0pOMmSV2VO60HhsVUKcLHY3MzTdqanjZR6acx1aKF5eYIPdMYaRdF05aNR8DPjGR/KxQmUhnGYAYGY+heCV5AALY3OOGPnEe6MjDew4yr3hc55VjMA2Fa3Iir3MeekBAyEWfMHZslIQOFv1u17w=
