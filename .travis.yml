language: go
go:
- 1.11
before_script:
- sudo apt-get install -qq sshpass
script: 
after_success:
- sshpass -p $SSH_PASS scp -rp -o stricthostkeychecking=no * $SSH_USER@$SSH_HOST:~/server/
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  build -t user-server ~/server/
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  stop user
- sshpass -p $SSH_PASS ssh -o StrictHostKeyChecking=no $SSH_USER@$SSH_HOST docker
  run -e "DB_HOST=postgres" -e "DB_USER=$DB_USER" -e "DB_PASS=$DB_PASS" -e "DB_DB=$DB_DB"
  -d --link postgres:postgres --publish 5050:8080 --name user --rm user-server
env:
  global:
  - secure: U8+LbK+VdoHiNG7XjD81x3I25Ej1mdgo4mzF92cWUU2t8FFFbwfJSJZ8E6RZiUq8FWEVtccluegaLUdsTT3sn8BFNUL49iSS4IfG9Mnusw6RfyamfeHEAUZGYj1nTU0+uZTB/2JoCfzuNgVZCbLUIwnKItzbnFH6xQoWZJz24INLKq34pAHmk0gd5/D+zbBMbH9bJNjaAeCC6XZ+WxQF9zLX2bUBYMbOMPx+GMlWVdjvoosrI7TcNE+NDyDpHBSUqzJZVSmOPkvkBDt8a+Luf9TteiLAB5tvO81uOJ2/n10MZ6HhJ/F1M242UUu4K0Sp6MkTxbaih/NHQzu34MB3F3k07QwgCK5BWE5xqgcQNNOg3JM8hCZ0jaWQz7HZ1ZN8aR4M2/kBsgxVX16FFN43XKI2ogD9pyjl7b0IfQEcmvHTkyXwNUJjVhTtfWKEvC6FR1jMRIg7rinElh6rk9qN8rk3MgUyulsMIdPfRIbhOImeKBXbmED2B5oExTWyOlKRweqkykXjVp68OCgKWv+T4mGG++Y4+1QorwYFM5ZwAailOM9XGDZ4ba5kS66zvSRdqkEi/l4pn9YXWZ8p/adawYEakNFIB3dHIuOrb8zeY/JvPCoBe25fQRuR3erhlnePdz8gX1wY1PZfLu5xXj5R1lywWOIAUHlzPv6UG4YDm0M=
  - secure: uM3UFZqkPEAnHBpHuAKmLAYgwiD/TZd2vz1/NbWEdQMb+H9mFa9VrEZdUrfTOezDTlhLG2IQD4QLOkTfnsAgPoDj3eV4wOWeeeuenhWsGrnF+X6RZ96T2F+kagCvG+hVo8wfiHppwalTBlVPxUbXyKj7ZTmU+UjrZYJuPvdeDJfSm98BhzlaOO5gqfZtFia/ilSP9FYz2011RpKgx+wLPdpEJChLTepxdh2odLIfYBv5d4RMIorclY+lv6fPAsoXwiTcE2ZJvIBp5DcbEwUQYavVX1GxSM5tDey98wO6HhiSTFTlhECN7KY/G1CFHGz6axqXcduJw8H+nxBe1RiezYHrrds195Ki0kSRnnXFYWW+lXcunSchZPTyUfd763fv+GNiv9/48xPTNyWgmJPC74vizfcXo2AQ99RcV8kLfQCtcj4kpxrOhbkFQ1feZgZvAUYUVEkHzbm0ciqzrdIGm1KpyXjXSu93wveNr06+KHQy85HHu0KW64OQwGv4hADXTVXSf/IeV/Y5kZMv9QlZuYy4GJT0ztUYJmC+LHkAQdEJEFnaz+AzN1sDTFvArkCT+1u2ePudW5DiJcM4XpPEd4dOG0//cBb49BbwZ5wxpzqoFaQepF4CvY5hWYC3GFY4Ghs2wE8QsztYEIOZxS1KuZh4zy4RuXa65Wy9lG+AIF8=
  - secure: bqsyGPucqNivFtCF8ugHyXwW81//CcKd82CeLENuAKD11DQgDexZzUWGr44PB4EEwtx89lHGVspcm0tWFgTy8Tth4ehtvcnsTR2UmpBgU+U6NTFr33n4KYADepQXHqOho4CBcgZtmOsoV8vSgzKJeiChZqbJY0gtaInZ8rcMUHMEpJmhKMS+dUyA6GWvek8GmJi1gpWrIcE4Q4XFKMbTBAj9MouhgFVSibYoXCECkI1xpujE8tOjhEAHisy2csBsxcyFCtpn6aBT9dN+d//aSYH5MRp5Da7xCr5PIotQKkzGa/Sbp3o2JP2b41+TuogcnLzFcdq6/1ac7Y6t14lXWZh/3b+WFKlrMRA8huyTOuOO1jp51W0wxXWmylQwrZaRjq+/lo86o0aGvL1nkFl613ykJTdQyIqJnqrJYCIKWH7V5rUv45aiwODVXWMWwXl3bNdIoz3FYsKgFioHbCUcHA1oXPcLRFVKOjWuCFpO29XUS5gHzeWwo/xuiuQTdzNGKRmaJgrjuGyY7E/jFLppMxzFi3PTa5Rz7+9ruwM2eq8p/CJQTmZzCMyWKnXuh9A7Yk1VVcapdlCMQu3kaOJJZx6RdzHqSVqavYZ8+iV3/N1Kr2dVp8jf9KAdPAD0NJl4NoZwDnulbg1pKtkDZp5E4zXEZcnyzJeJk/lFz0F/+ww=
  - secure: euwPpTHLrTw+gXNvuj2M8QcB+yKFgC3X56eaxvP9B/Fo2ljCSF4FrPQ+/vAbTojf+Z+XT++VcTOBT3Xug7Qkup4TJCPS68hT/aR5P4KWlUhRkVI3Je8qUvohjYBiYM96dD8FL4VHiqCEvKQY6G9KY8CrxOuboNfAVWGouNju0wP1fskuz0zntUGbRuWJv7eP8iPZLvnkSjzrg+iG4RIg4OMSPulN0kQthnvVrxPaq1t7ZonqBVL+RXokvMu7/fn1TSWxN/yPZEy/fuewPQNBOtzY2GeAnzix0GcnNX1NzqePKXwXPDIuo/boRr6+DKOfkCnhSbRlnVPMnLzgsCvaX+YWFglXhgpV5V+ztHcaAMdgRWr+3l4I+rvk8w7wJT7jyKccXb9chGIxPRxubJz/uktP4Sqfap0QdwPgbvYaCG8XIAVYKg0Ag8JGNoxkaXwEhBRdsiRUOLyaiNOIQWEgcsLXQ+asD9lIokgNwSI3PPb6onBa28d3jsvk0j+ArJ/9rsuJ/S5AcOxTCzOfUKpkDcB27iC3Ong0XhiZQJpw6lqQylU7OTOGCchXQuqRoqwQ8Wb3XyImWPZrwYKNziL/p31+uJRpaS9LdB3LJLKZqXs2CM+Uc/51De1NWaPaTtLaOz9TCRBfabW2J/LlqVwzcbnlYb2vmvtBx18rZX7f47U=
  - secure: lggw8ifFQCjVs1TSLSQB1WVa0/fBAPANMolPAbplVM1xWIjoAQ0kgXt103tByyKktR3H/ZSOXHJTuslTi+d99e0rEyziotfB1l3JQmR7H3NutnIBEIueKnwLFUSmgZaY5YmTVPj1AHEMcYlyv1gUm1eZhIM8EB66af2926GGP1wQO/m/ik84aEGv6k4YGI5k6mzQS0YWW5UjgKbmzivLwGBns0Uhqs7w7Cpz5rGj0qzKB13vUd6RRdbS0uxgbVvbvwm8P1qHIhK8NrGWaU6jK4YeOH+Z8juqjHQS2RfzhuUOWoG+t0Yqj8gmmQcc66ANnrszHVMVcgCC5ZZV7DDqvQ//YKhKQRq44FkkT9k37BHXOOnVqFWZqKxHKLJOMeYmThjahVMlhchnR1Sw5gvueTLG194I0rUGkx/sONV26XM+i4QjM/iBqe6/NM30Es2ghkaYp8zbSbHp07yv0Czto9S1JhSJwYeKvFjYpz0UVmmJmphfucn/ZXtTCiAcU51+bJY8LtfPyKYnB2+rY4pMQaxZuKQ98LWJ/kckDfs8949amVpRfQzVMiuPwMs+fjE6Pkx/OnQ/MaCEq93cUj/1vaEQwaxWMWDiVF9NE9dICOQ1Z8b4j5H9SrDzkr7k2w+BOiHH9RwPX5npdBgIgdNhVcsfvWt1L4TjCgIh/RcqJkY=
  - secure: Y8/YFzHoAChqxALG/Q4UVK6U9cv5dc5mBU/erBftjwWJHtmOyD5CVHWzr8jy+i3ZmMYBss93tGektPXuQqT83DLCE5439QUazwcCOPgU0Ynx+zdr/uPmSvn7ggqo41UejweAvwl6lBKCZC5Jo1lPknLY/gHIrEVGi5oGT8iVWxKIFLvr/0zOkx0z3c/LDC2mLHWwSq4Z9cs12dqDJPFd47sVxuxwp+TUfyOaPxuVUJgO+BhpmU6M9pAES4+Bu8Xt5ilK3AnfD2BFz9D5DwwXEWN1JnaqHNER47TDM74vyQnxfvaCiq3+4R3D9vjx9YEaL5oqM8iaTzAjzLTFzoevXXSRmdIkhBKqmJ3MfIe0wDyyZolfpBIiOcxrV393gzovaK4UEScZsJoTeYaZPvkpwl+AHmCWnmlH6j5k7QQjtl6SlP4uUIpNGMgFsNpB8naP17j3IHifpz+fRDbBOegPoxP4CLIVJdg23/biEwkEEErMdK/YF0FZcTeAmVL/1Qm9OUH/EIQBWKSiw6SIRvdU0Y2kLgMu05q+/qxXeLp70642rcAheyiNeXqUz6t6EKvbqc017gm5KwGv068eSit1QgoTi8Ho41QznXSi5ZkFv0E80EoX706cUoDtkU6gfSix2B638lQgKg2tNi3kZ3BkRC6SAzsZ/3M39gpVv9rrXbc=
